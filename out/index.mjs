import{createDefu as $}from"defu";import{installPackage as k}from"@antfu/install-pkg";import{createRequire as v}from"module";var w=process.env.NODE_ENV||"development",x=v(import.meta.url);function y(e){try{return x.resolve(e),!0}catch(n){return console.log(n),!1}}async function P(e,n){if(y(e))return!0;if(n&&w==="development")try{return await k(e,{silent:!0}),!0}catch{return!1}return!1}function b(e,n,o){let t="",r=o?"img":"svg";Object.entries(n).forEach(([a,l])=>{o?t+=`${a}:${l};`:t+=`${a}=${l} `});let s=`<${r}`;return s+=o?` style="${t}" src="data:image/svg+xml;utf8,${j(e)}">`:` ${t}> ${e}`,s+=`</${r}>`,s}async function h(e,n,o){let t=[];e.replace(n,(s,...a)=>{let l=o(s,...a);t.push(l)});let r=await Promise.all(t);return e.replace(n,()=>r.shift())}function j(e){return e.replace("<svg",~e.indexOf("xmlns")?"<svg":'<svg xmlns="http://www.w3.org/2000/svg"').replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/{/g,"%7B").replace(/}/g,"%7D").replace(/</g,"%3C").replace(/>/g,"%3E")}function q(e){e=$((t,r,s)=>{if(t[r]instanceof Map)return!0})(e,{installPkg:!0,alias:new Map,prefix:"",separator:":"});let o={async getIcons(t,r,s){e.alias.has(t)&&(t=e.alias.get(t)),e.prefix!==""&&!t.startsWith(e.prefix+e.separator)&&(t=e.prefix+e.separator+t);let[a,l]=t.split(e.separator),u="@iconify/json/json/"+a,c="@iconify-json/"+a,i="",p="";if(y(u)?i=u:await P(c,e.installPkg)&&(i=c),i.length>0){let{icons:f}=x(i);for(let g of Object.keys(f))g==l&&(p=f[g].body||"")}return p===""?p:b(p,r,s)},getIconsSync(t,r,s){e.alias.has(t)&&(t=e.alias.get(t)),e.prefix!==""&&!t.startsWith(e.prefix+e.separator)&&(t=e.prefix+e.separator+t);let[a,l]=t.split(e.separator),u="@iconify/json/json/"+a,c="@iconify-json/"+a,i="",p="";if(y(u)?i=u:y(c)&&(i=c),i.length>0){let{icons:f}=x(i);for(let g of Object.keys(f))g==l&&(p=f[g].body||"")}return p===""?p:b(p,r,s)},async iconify(t,r,s=/::(.*?)::/g){return await h(t,s,async(l,u)=>{let c=await o.getIcons(u,r.styles,r.base64);return c===""?l:c})}};return o}export{q as default};
